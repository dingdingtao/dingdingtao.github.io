<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Django参考 | dingdingtao的个人静态网站</title>
<link rel="shortcut icon" href="https://dingdingtao.site/favicon.ico?v=1614865387657">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://dingdingtao.site/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Django参考 | dingdingtao的个人静态网站 - Atom Feed" href="https://dingdingtao.site/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">

<!-- gitalk -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<!-- gitalk -->
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>

<!-- 点击特效 -->
<!-- 爱心 -->
<script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/love.min.js"></script>

<!-- 看板 -->
<script src="https://eqcn.ajz.miesnfu.com/wp-content/plugins/wp-3d-pony/live2dw/lib/L2Dwidget.min.js"></script>
<!-- 看板配置 -->
<script>
    L2Dwidget.init({
        "model": {
            jsonPath: "https://unpkg.com/live2d-widget-model-hijiki@1.0.5/assets/hijiki.model.json",
            "scale": 1
        },
        "display": {
            "position": "right",
            "width": 200,
            "height": 400,
            "hOffset": 0,
            "vOffset": -20
        },
        "mobile": {
            "show": true,
            "scale": 0.3
        },
        "react": {
            "opacityDefault": 0.7,
            "opacityOnHover": 0.2
        }
    });
</script>
<!--
黑猫：https://unpkg.com/live2d-widget-model-hijiki@1.0.5/assets/hijiki.model.json
萌娘：https://unpkg.com/live2d-widget-model-shizuku@1.0.5/assets/shizuku.model.json
白猫：https://unpkg.com/live2d-widget-model-tororo@1.0.5/assets/tororo.model.json
狗狗：https://unpkg.com/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json
小可爱：https://unpkg.com/live2d-widget-model-z16@1.0.5/assets/z16.model.json
小可爱：https://unpkg.com/live2d-widget-model-koharu@1.0.5/assets/koharu.model.json
-->



    <meta name="description" content="
Django安装、创建项目、目录结构及简单使用方法


安装django
pip3 install Django==3.0.6 -i https://pypi.tuna.tsinghua.edu.cn/simple

创建项目
djang..." />
    <meta name="keywords" content="Django" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://dingdingtao.site">
  <img class="avatar" src="https://dingdingtao.site/images/avatar.png?v=1614865387657" alt="">
  </a>
  <h1 class="site-title">
    dingdingtao的个人静态网站
  </h1>
  <p class="site-description">
    快快长大
  </p>
  <div class="menu-container">
    
      
        <a href="https://dingdingtao.github.io" class="menu">
          列表
        </a>
      
    
      
        <a href="https://dingdingtao.github.io/tags" class="menu">
          标签
        </a>
      
    
      
        <a href="https://dingdingtao.github.io/archives" class="menu">
          时间线
        </a>
      
    
      
        <a href="https://dingdingtao.github.io/post/about" class="menu">
          关于
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="https://github.com/dingdingtao" target="_blank">
          <i class="ri-github-line"></i>
        </a>
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Django参考
            </h2>
            <div class="post-info">
              <span>
                2021-03-02
              </span>
              <span>
                7 min read
              </span>
              
                <a href="https://dingdingtao.site/tag/Python/Django/" class="post-tag">
                  # Django
                </a>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <center>
Django安装、创建项目、目录结构及简单使用方法
</center>
<!-- more -->
<h2 id="安装django">安装django</h2>
<pre><code class="language-text">pip3 install Django==3.0.6 -i https://pypi.tuna.tsinghua.edu.cn/simple
</code></pre>
<h2 id="创建项目">创建项目</h2>
<pre><code class="language-text">django-admin.py startproject testdj
</code></pre>
<p><strong>目录结构</strong></p>
<pre><code class="language-text">|-- HelloWorld
|   |-- __init__.py
|   |-- asgi.py
|   |-- settings.py
|   |-- urls.py
|   |-- wsgi.py
|-- manage.py
</code></pre>
<p><strong>目录说明</strong></p>
<ul>
<li><code>HelloWorld</code>: 项目的容器。</li>
<li><code>manage.py</code>: 一个实用的命令行工具，可让你以各种方式与该 Django 项目进行交互。</li>
<li><code>HelloWorld/__init__.py</code>: 一个空文件，告诉 Python 该目录是一个 Python 包。</li>
<li><code>HelloWorld/asgi.py</code>: 一个 ASGI 兼容的 Web 服务器的入口，以便运行你的项目。</li>
<li><code>HelloWorld/settings.py</code>: 该 Django 项目的设置/配置。</li>
<li><code>HelloWorld/urls.py</code>: 该 Django 项目的 URL 声明; 一份由 Django 驱动的网站&quot;目录&quot;。</li>
<li><code>HelloWorld/wsgi.py</code>: 一个 WSGI 兼容的 Web 服务器的入口，以便运行你的项目。</li>
</ul>
<h2 id="启动">启动</h2>
<pre><code class="language-text">python manage.py runserver [ip:port]
</code></pre>
<h2 id="视图">视图</h2>
<p>创建视图文件HelloWorld/HelloWorld/views.py</p>
<pre><code class="language-python">'''引入HttpResponse'''
from django.http import HttpResponse
 '''视图函数'''
def hello(request):
    '''
    
    '''
    return HttpResponse(&quot;Hello world ! &quot;)
</code></pre>
<h3 id="视图函数">视图函数</h3>
<p>视图层中有两个重要的对象：<br>
请求对象(request): 视图函数的固定第一参数。<br>
响应对象(HttpResponse): 视图函数返回内容。</p>
<p><strong>请求对象</strong><br>
常用的 request 属性<br>
<code>GET</code>: 数据类型是 QueryDict，一个类似于字典的对象，包含 HTTP GET 的所有参数。<br>
有相同的键，就把所有的值放到对应的列表里。<br>
取值格式：对象.方法。<br>
get()：返回字符串，如果该键对应有多个值，取出该键的最后一个值。</p>
<pre><code class="language-python">def runoob(request):
    name = request.GET.get(&quot;name&quot;)
    return HttpResponse('姓名：{}'.format(name))
</code></pre>
<p><code>POST</code>: 数据类型是 QueryDict，一个类似于字典的对象，包含 HTTP POST 的所有参数。<br>
常用于 form 表单，form 表单里的标签 name 属性对应参数的键，value 属性对应参数的值。<br>
取值格式： 对象.方法。<br>
get()：返回字符串，如果该键对应有多个值，取出该键的最后一个值。</p>
<pre><code class="language-python">def runoob(request):
    name = request.POST.get(&quot;name&quot;)
    return HttpResponse('姓名：{}'.format(name))
</code></pre>
<p><code>body</code>: 数据类型是二进制字节流，是原生请求体里的参数内容，在 HTTP 中用于 POST，因为 GET 没有请求体。<br>
在 HTTP 中不常用，而在处理非 HTTP 形式的报文时非常有用，例如：二进制图片、XML、Json 等。</p>
<pre><code class="language-python">def runoob(request):
    name = request.body
    print(name)
    return HttpResponse(&quot;菜鸟教程&quot;)
</code></pre>
<p><code>path</code>: 获取 URL 中的路径部分(不包括域名端口等)，数据类型是字符串。</p>
<pre><code class="language-python">def runoob(request):
    name = request.path
    print(name)
    return HttpResponse(&quot;菜鸟教程&quot;)
</code></pre>
<p><code>method</code>:  获取当前请求的方式，数据类型是字符串，且结果为大写。</p>
<pre><code class="language-python">def runoob(request):
    name = request.method
    print(name)
    return HttpResponse(&quot;菜鸟教程&quot;)
</code></pre>
<p><strong>响应对象</strong><br>
<code>HttpResponse()</code>: 返回文本，参数为字符串，字符串中写文本内容。如果参数为字符串里含有 html 标签，也可以渲染。</p>
<p><code>render()</code>: 返回文本，第一个参数为 request，第二个参数为字符串（页面名称），第三个参数为字典（可选参数，向页面传递的参数：键为页面参数名，值为views参数名）。</p>
<p><code>redirect()</code>：重定向，跳转新页面。参数为字符串，字符串中填写页面路径。一般用于 form 表单提交后，跳转到新页面。</p>
<h2 id="url路由">URL路由</h2>
<p>绑定 URL 与视图函数</p>
<pre><code class="language-python">'''引入url'''
from django.conf.urls import url
'''从当前目录引入views视图文件'''
from . import views
'''配置url与视图对应关系'''
urlpatterns = [
    '''
    url(请求路径, 视图函数)
    '''
    url(r'^$', views.hello),
]
</code></pre>
<p><strong>路由</strong><br>
<code>url()</code>: 普通路径和正则路径均可使用，需要自己手动添加正则首位限制符号。</p>
<pre><code class="language-python">from django.conf.urls import url # 用 url 需要引入

urlpatterns = [
    url(r'^admin/$', admin.site.urls),
    url(r'^index/$', views.index), # 普通路径
    url(r'^articles/([0-9]{4})/$', views.articles), # 正则路径
]
</code></pre>
<p><code>path()</code>：用于普通路径，不需要自己手动添加正则首位限制符号，底层已经添加。<br>
<code>re_path</code>：用于正则路径，需要自己手动添加正则首位限制符号。</p>
<pre><code class="language-python">from django.urls import re_path # 用re_path 需要引入
urlpatterns = [
    path('admin/', admin.site.urls),
    path('index/', views.index), # 普通路径
    re_path(r'^articles/([0-9]{4})/$', views.articles), # 正则路径
]
</code></pre>
<p><strong>路径分组</strong></p>
<p>正则路径中的无名分组</p>
<pre><code class="language-python">urlpatterns = [
    path('admin/', admin.site.urls),
    re_path(&quot;^index/([0-9]{4})/$&quot;, views.index),
]

from django.shortcuts import HttpResponse

def index(request，year):
    print(year) # 一个形参代表路径中一个分组的内容，按顺序匹配
    return HttpResponse('菜鸟教程')

</code></pre>
<p>正则路径中的有名分组</p>
<pre><code class="language-python">urlpatterns = [
    path('admin/', admin.site.urls),
    re_path(&quot;^index/(?P[0-9]{4})/(?P[0-9]{2})/$&quot;, views.index),
]

from django.shortcuts import HttpResponse
def index(request, year, month):
    print(year,month) # 一个形参代表路径中一个分组的内容，按关键字对应匹配
    return HttpResponse('菜鸟教程')
</code></pre>
<p><strong>路由分发</strong><br>
存在问题：Django 项目里多个app目录共用一个 urls 容易造成混淆，后期维护也不方便。<br>
解决：使用路由分发（include），让每个app目录都单独拥有自己的 urls。<br>
步骤：</p>
<ol>
<li>在每个 app 目录里都创建一个 urls.py 文件。</li>
<li>在项目名称目录下的 urls 文件里，统一将路径分发给各个 app 目录。</li>
</ol>
<pre><code class="language-python">from django.contrib import admin
from django.urls import path,include # 从 django.urls 引入 include
urlpatterns = [
    path('admin/', admin.site.urls),
    path(&quot;app01/&quot;, include(&quot;app01.urls&quot;)),
    path(&quot;app02/&quot;, include(&quot;app02.urls&quot;)),
]
</code></pre>
<p><strong>反向解析</strong></p>
<p><strong>命名空间</strong></p>
<h2 id="模版">模版</h2>
<p><strong>模版目录</strong><br>
项目目录下创建templates目录,修改 TEMPLATES 中的 DIRS 为 [os.path.join(BASE_DIR, 'templates')],将模版目录修改为templates。</p>
<pre><code class="language-conf">TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [os.path.join(BASE_DIR, 'templates')], # 修改位置
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]
</code></pre>
<p><strong>创建模版文件</strong><br>
参考<a href="https://www.runoob.com/django/django-template.html">模版标签</a></p>
<p><strong>向模板提交数据</strong></p>
<pre><code class="language-python">from django.shortcuts import render
 
def runoob(request):
    context          = {}
    context['hello'] = 'Hello World!'
    return render(request, 'runoob.html', context)
</code></pre>
<h2 id="参考">参考</h2>
<p><a href="https://www.runoob.com/django/django-tutorial.html">django参考</a></p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E5%AE%89%E8%A3%85django">安装django</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE">创建项目</a></li>
<li><a href="#%E5%90%AF%E5%8A%A8">启动</a></li>
<li><a href="#%E8%A7%86%E5%9B%BE">视图</a>
<ul>
<li><a href="#%E8%A7%86%E5%9B%BE%E5%87%BD%E6%95%B0">视图函数</a></li>
</ul>
</li>
<li><a href="#url%E8%B7%AF%E7%94%B1">URL路由</a></li>
<li><a href="#%E6%A8%A1%E7%89%88">模版</a></li>
<li><a href="#%E5%8F%82%E8%80%83">参考</a></li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://dingdingtao.site/post/hive-shi-jian-chu-li-han-shu/">
              <h3 class="post-title">
                Hive时间处理函数
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Please&nbsp;&nbsp;contact&nbsp;&nbsp;the&nbsp;&nbsp;authors&nbsp;&nbsp;<a href="https://github.com/dingdingtao" target="_blank">dingdingtao</a>&nbsp;&nbsp;if&nbsp;&nbsp;you&nbsp;&nbsp;have&nbsp;&nbsp;further&nbsp;&nbsp;questions
  <a class="rss" href="https://dingdingtao.site/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
